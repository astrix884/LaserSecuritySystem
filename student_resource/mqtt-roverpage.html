<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Rover + DHT11 Dashboard</title>
<script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
<style>
  body { font-family: 'Poppins', sans-serif; background: #f4f4f4; padding: 20px; text-align: center; }
  .card { background: #fff; padding: 20px; margin: 15px auto; width: 300px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.2); }
  h1 { color: #333; }
  button { padding: 10px 20px; margin: 8px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }
  .forward { background: #00C851; color: #fff; }
  .backward { background: #ff4444; color: #fff; }
  .left { background: #33b5e5; color: #fff; }
  .right { background: #33b5e5; color: #fff; }
  .stop { background: #ffbb33; color: #fff; }
  #data { font-size: 18px; margin-top: 10px; }
</style>
</head>
<body>

<h1>MQTT Rover Control Dashboard üöó</h1>

<div class="card">
  <h2>Control Panel</h2>
  <button class="forward" onclick="sendCommand('F')">‚Üë Forward</button><br>
  <button class="left" onclick="sendCommand('L')">‚Üê Left</button>
  <button class="stop" onclick="sendCommand('S')">Stop</button>
  <button class="right" onclick="sendCommand('R')">Right ‚Üí</button><br>
  <button class="backward" onclick="sendCommand('B')">‚Üì Backward</button>
</div>

<div class="card">
  <h2>Environment Data üå°Ô∏è</h2>
  <p>Temperature: <span id="temp">--</span> ¬∞C</p>
  <p>Humidity: <span id="hum">--</span> %</p>
</div>

<script>
// Connect to MQTT Broker
const client = mqtt.connect('wss://f5bc2a85c9c747488d7ab174eaa1faaf.s1.eu.hivemq.cloud:8884/mqtt', {
  username: "hivemq.webclient.1758715810298",
  password: "Y*9.%m2vj!rKJyLB1X0q"
});

client.on('connect', () => {
  console.log("Connected to HiveMQ ‚úÖ");
  client.subscribe('rover/sensor/#');
});

function sendCommand(cmd) {
  console.log("Sending command:", cmd);
  client.publish('rover/control', cmd);
}

client.on('message', (topic, message) => {
  const msg = message.toString();
  if (topic === "rover/sensor/temp") document.getElementById('temp').innerText = msg;
  if (topic === "rover/sensor/hum") document.getElementById('hum').innerText = msg;
});
</script>

</body>
</html>
